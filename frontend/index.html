<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medieval Town Simulation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Medieval Town Simulation</h1>
        
        <!-- Add this button inside the container div, before the simulation-layout -->
        <button class="combat-button" onclick="window.combatScene.show()">Start Combat</button>

        <div class="simulation-layout">
            <!-- Add new money distribution chart -->
            <div class="money-distribution">
                <h3>Economic Distribution</h3>
                <div id="money-chart"></div>
            </div>

            <!-- Wrap market controls in collapsible section -->
            <details class="advanced-controls">
                <summary>Advanced Market Controls</summary>
                <div class="market-controls">
                    <div class="entity inventory-status">
                        <h3>Current Status</h3>
                        <div class="inventory-row">
                            <div>
                                <strong>Town:</strong>
                                <p>Population: <span id="town-population">50</span></p>
                                <p>Wheat: <span id="town-wheat">50</span></p>
                                <p>Tools: <span id="town-tools">0</span></p>
                            </div>
                            <div>
                                <strong>Village:</strong>
                                <p>Population: <span id="village-population">30</span></p>
                                <p>Wheat: <span id="village-wheat">0</span></p>
                                <p>Tools: <span id="village-tools">50</span></p>
                            </div>
                        </div>
                    </div>

                    <div class="entity">
                        <h3>Depletion Rates</h3>
                        <div class="control-group">
                            <label>Wheat: <input type="range" id="wheat-depletion" min="0" max="5" step="0.1" value="1"></label>
                            <label>Tools: <input type="range" id="tools-depletion" min="0" max="5" step="0.1" value="1"></label>
                        </div>
                    </div>

                    <div class="entity">
                        <h3>Town Market</h3>
                        <div class="control-group">
                            <label>Wheat Demand: <input type="range" id="wheat-demand" min="0" max="100" value="50"></label>
                            <label>Wheat Supply: <input type="range" id="wheat-supply" min="0" max="100" value="50"></label>
                            <p>Wheat Price: <span id="wheat-price">10.0</span></p>
                        </div>
                    </div>

                    <div class="entity">
                        <h3>Village Market</h3>
                        <div class="control-group">
                            <label>Tools Demand: <input type="range" id="tools-demand" min="0" max="100" value="50"></label>
                            <label>Tools Supply: <input type="range" id="tools-supply" min="0" max="100" value="50"></label>
                            <p>Tools Price: <span id="tools-price">10.0</span></p>
                        </div>
                    </div>

                    <div class="entity">
                        <h3>Market Controls</h3>
                        <div class="control-group">
                            <label>Supply Ratio: <input type="range" id="supply-ratio" min="0" max="100" value="50"></label>
                        </div>
                    </div>
                </div>
            </details>

            <div class="simulation-view">
                <canvas id="simulation-canvas" width="600" height="600"></canvas>
                <div class="location-info town-info" id="town-info"></div>
                <div class="location-info village-info" id="village-info"></div>
            </div>

            <!-- Replace the trade-log div with these accounting panels -->
            <div class="right-panel">
                <div class="accounting-panel">
                    <div class="accounting-header" id="accounting-log-toggle">
                        <h3>Economic Reports</h3>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div id="town-accounting"></div>
                    <div id="village-accounting"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="simulation.js"></script>
    <script src="combat.js"></script>
</body>
</html>
